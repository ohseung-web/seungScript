<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>배너(슬라이더)</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }
      body {
        background-color: #f5f5f5;
      }
      .slider-wrap {
        position: relative;
        width: 600px;
        height: 350px;
        margin: 100px auto;
        border-radius: 20px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        /* 모서리 둥글게 안보이므로 숨겨야 함 */
        overflow: hidden;
      }
      .slider img {
        width: 100%;
        height: 100%;
        /* object-fit: cover; */
      }
      .btns {
        position: absolute;
        bottom: 15px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 8px;
      }
      .btns span {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background-color: #ccc;
        cursor: pointer;
        transition: 0.3s;
      }
      .btns span.active {
        background-color: #007bff;
        /* 
          transform은 요소에 회전, 확대, 이동, 기울이기 
                   등의 변형 효과를 줄 때 사용
          scale(1.3)	크기를 1.3배 확대
          scale(0.5)	크기를 절반으로 축소
          rotate(45deg)	45도 회전
        */
        transform: scale(1.3);
      }
      .control {
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: rgba(255, 255, 255, 0.8);
        padding: 5px 10px;
        border-radius: 10px;
        font-size: 14px;
        cursor: pointer;
        /* 사용자의 선택 */
        user-select: none;
      }
    </style>
  </head>
  <body>
    <div class="slider-wrap">
      <div class="slider">
        <img id="photo" src="img/pic_1.jpg" alt="슬라이드 이미지" />
      </div>
      <div class="btns">
        <span class="active"></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div class="control" id="togglebtn">&#x23F8; 정지</div>
    </div>

    <script>
      // -----------------------------
      // DOM 접근하여 변수 지정
      // -----------------------------
      // id가 'photo'인 <img> 요소를 찾아 변수 photo에 할당.
      // 슬라이드에 보여줄 이미지를 바꿀 때 이 요소의 src를 변경합니다.
      let photo = document.getElementById('photo');
      // '.btns span' 셀렉터로 하단의 점(네비게이션) 버튼들을
      // 모두 선택해 NodeList로 반환.
      // btns[0], btns[1], ... 형태로 각 버튼에 접근 가능.
      let btns = document.querySelectorAll('.btns span');
      // id가 'togglebtn'인 요소를 찾아 재생/정지 토글 버튼으로 사용.
      let toggleBtn = document.getElementById('togglebtn');

      // 현재 보여주는 슬라이드 인덱스 (0부터 시작).
      let current = 0;

      // 총 슬라이드(버튼) 개수. btns.length로 동적으로 계산.
      let total = btns.length;

      // 슬라이드가 재생 중인지 상태를 저장하는 불리언.
      // true면 현재 자동 재생 중이라는 의미.
      let isPlay = true;

      // setInterval의 ID를 저장할 변수.
      // 멈출 때 clearInterval(timer)에서 필요.
      let timer;

      // -----------------------------
      // 이미지 자동 경로 변경 함수
      // -----------------------------
      // index를 받아 해당 인덱스의 이미지를 보여주고,
      // 하단 네비게이션(점) 중 활성화된 것에 active 클래스를 적용.
      function showSlide(index) {
        // photo 요소의 src 속성을 `img/pic_{index+1}.jpg`로 바꿔서 이미지를 교체.
        // 예: index = 0 -> img/pic_1.jpg
        photo.src = `img/pic_${index + 1}.jpg`;

        // 모든 btns 요소에서 active 클래스를 제거하고,
        for (let i = 0; i < total; i++) {
          // i번째 버튼에서 active 클래스 제거
          btns[i].classList.remove('active');
        }
        // index에 해당하는 버튼에 active 클래스 추가
        // 클릭 또는 자동전환된 index에 해당하는 버튼에 active를 추가.
        btns[index].classList.add('active');

        // btns.forEach((btn) => {
        //   btn.classList.remove('active');
        //   btns[index].classList.add('active');
        // });
      }

      // -----------------------------
      // 3초마다 이미지 변경되는 자동 슬라이드 시작
      // -----------------------------
      function startSlide() {
        // setInterval을 사용하여 3000ms(3초)마다 콜백 실행.
        // 콜백 내부는 currnet(현재 인덱스)를 1 증가시키고,
        // 범위를 벗어나면 0으로 되돌림.
        // 그런 다음 showSlide(currnet)를 호출하여 화면 갱신.
        timer = setInterval(() => {
          // 5 % 5 = 0
          // current = (current + 1) % total;
          if (current === total - 1) {
            current = 0;
          } else {
            current++;
          }
          // 바뀐 인덱스에 해당하는 슬라이드를 보여줌
          showSlide(current);
        }, 3000);
      }

      // 슬라이드 정지
      function stopSlide() {
        // setInterval로 등록된 타이머를 멈춤
        // (멈추려면 timer가 유효해야 함).
        // 이후 필요하면 startSlide()로 다시 재생 가능.
        clearInterval(timer);
      }

      // 초기실행 : 함수call
      // 페이지 로드 직후 현재 인덱스(currnet)에
      // 해당하는 슬라이드를 먼저 보여줌
      showSlide(current);
      // 자동 재생 시작 (3초 간격)
      startSlide();

      // 재생/정지버튼 기능
      toggleBtn.addEventListener('click', () => {
        // isPlay가 true이면 현재 재생 중이므로 정지 동작을 수행
        if (isPlay) {
          stopSlide(); // 타이머 정지
          toggleBtn.textContent = '▶ 재생'; // 버튼 텍스트를 '재생'으로 변경
        } else {
          // isPlay가 false이면 일시정지 상태 → 재생으로 전환
          startSlide(); // 타이머 재시작
          // toggleBtn.textContent = '⏸ 정지';
          toggleBtn.textContent = '\u23F8 정지'; // 버튼 텍스트를 '정지'로 변경
        }
        // isPlay 상태를 토글(true <-> false)
        // isPlay = !isPlay;를 없애면:
        // isPlay가 항상 true로 고정됨
        // 버튼을 클릭해도 if (isPlay) 조건이 항상 true → stopSlide()만 계속 실행
        // 한 번 클릭 후에도 다시 재생이 되지 않음 → 재생/정지 토글 기능 실패
        isPlay = !isPlay;
      });

      // 버튼 클릭 시 해당 이미지 표시
      btns.forEach((btn, index) => {
        btn.addEventListener('click', () => {
          current = index;
          showSlide(current);
        });
      });
    </script>
  </body>
</html>
